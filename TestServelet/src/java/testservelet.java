/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

import java.io.IOException;
import java.io.PrintWriter;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 *
 * @author cse
 */
@WebServlet(urlPatterns = {"/testservelet"})
public class testservelet extends HttpServlet {

    static Integer[] addlog = {116, 93, 306, 107, 77, 81, 105, 98, 82, 152, 129, 115, 87, 128, 68, 77, 61, 69, 52, 75, 79, 72, 247, 72, 64, 159, 70, 77, 76, 66, 63, 159, 74, 56, 80, 67, 60, 76, 80, 113, 62, 73, 79, 61, 56, 74, 66, 64, 79, 67, 109, 71, 84, 145, 79, 62, 458, 130, 127, 67, 144, 68, 64, 66, 83, 77, 67, 80, 83, 130, 62, 110, 66, 71, 68, 76, 68, 56, 141, 73, 83, 88, 68, 95, 131, 71, 73, 89, 132, 459, 72, 85, 65, 94, 67, 101, 82, 68, 68, 102};
    static Integer[] get_quiz = {144, 87, 66, 113, 76, 187, 84, 176, 274, 77, 86, 128, 83, 129, 176, 125, 83, 64, 82, 209, 143, 77, 82, 82, 64, 86, 134, 63, 88, 74, 175, 102, 73, 89, 188, 88, 84, 119, 70, 122, 91, 93, 66, 70, 85, 71, 88, 80, 123, 82, 122, 76, 89, 165, 207, 225, 81, 70, 86, 89, 80, 104, 91, 64, 77, 81, 71, 85, 76, 185, 73, 76, 116, 171, 69, 89, 128, 80, 81, 100, 61, 82, 86, 60, 82, 82, 73, 68, 120, 126, 135, 75, 82, 112, 84, 77, 60, 77, 110, 79};
    static Integer[] get_submision = {50, 50, 53, 46, 38, 44, 50, 51, 52, 51, 65, 39, 39, 53, 43, 44, 42, 52, 50, 48, 37, 46, 44, 55, 36, 38, 41, 40, 45, 50, 37, 40, 48, 48, 33, 49, 30, 50, 143, 49, 46, 47, 34, 51, 40, 47, 43, 48, 49, 48, 51, 54, 55, 45, 42, 48, 31, 52, 48, 50, 47, 52, 46, 47, 37, 43, 45, 41, 41, 56, 33, 35, 52, 52, 49, 43, 49, 56, 44, 38, 48, 49, 40, 52, 42, 39, 44, 47, 47, 42, 37, 36, 32, 40, 45, 47, 44, 49, 40, 44};
    static Integer[] ldap_auth = {28, 1041, 31, 35, 31, 25, 29, 26, 22, 26, 34, 49, 48, 32, 29, 34, 27, 30, 32, 45, 32, 31, 32, 35, 28, 29, 31, 30, 34, 743, 40, 34, 29, 50, 27, 37, 34, 32, 27, 31, 33, 1219, 1093, 1172, 30, 30, 35, 30, 30, 47, 27, 32, 1120, 30, 27, 33, 27, 48, 38, 39, 29, 96, 33, 26, 26, 28, 34, 532, 28, 37, 35, 29, 34, 35, 891, 28, 36, 31, 35, 77, 28, 36, 34, 26, 34, 30, 33, 38, 28, 45, 893, 25, 30, 25, 33, 32, 33, 29, 30, 36};
    static Integer[] partial_submit = {72, 75, 180, 75, 73, 62, 73, 111, 68, 71, 81, 88, 83, 76, 83, 78, 73, 85, 65, 88, 84, 82, 88, 57, 119, 84, 68, 80, 91, 84, 77, 69, 66, 67, 76, 77, 85, 65, 66, 141, 73, 66, 114, 78, 64, 73, 80, 79, 84, 116, 69, 63, 63, 71, 81, 89, 60, 74, 76, 88, 67, 71, 84, 74, 67, 83, 66, 77, 61, 78, 83, 81, 67, 71, 83, 62, 85, 229, 95, 118, 67, 128, 80, 70, 92, 88, 84, 79, 95, 83, 86, 67, 70, 71, 89, 79, 77, 79, 75, 81};
    static Integer[] quiz = {23, 38, 26, 30, 16, 104, 23, 88, 26, 22, 17, 28, 21, 31, 23, 20, 24, 21, 67, 24, 93, 322, 20, 24, 18, 27, 192, 30, 27, 70, 27, 29, 22, 22, 23, 28, 28, 25, 24, 26, 21, 25, 24, 28, 139, 22, 23, 23, 35, 22, 83, 37, 25, 88, 25, 24, 22, 24, 23, 22, 20, 20, 21, 22, 28, 24, 22, 24, 29, 54, 29, 51, 28, 27, 23, 23, 25, 27, 23, 134, 125, 23, 22, 31, 22, 20, 22, 22, 169, 29, 124, 21, 86, 23, 20, 62, 20, 24, 31, 25};
    static Integer[] submit = {122, 193, 199, 247, 249, 203, 132, 218, 154, 189, 120, 125, 238, 166, 125, 164, 241, 220, 116, 180, 290, 116, 119, 237, 294, 236, 140, 109, 151, 178, 125, 128, 290, 121, 116, 185, 202, 124, 216, 110, 198, 177, 114, 190, 128, 127, 121, 122, 169, 361, 118, 109, 118, 151, 106, 277, 260, 483, 124, 141, 285, 250, 166, 199, 249, 124, 123, 119, 248, 193, 121, 118, 189, 128, 124, 231, 238, 163, 289, 122, 164, 189, 113, 112, 249, 241, 218, 124, 117, 116, 293, 220, 293, 304, 150, 285, 188, 118, 294, 122};
    static Integer[] summary = {34, 26, 22, 31, 27, 49, 32, 24, 45, 30, 30, 38, 33, 28, 33, 40, 33, 44, 22, 50, 31, 32, 30, 35, 26, 35, 34, 31, 25, 26, 34, 33, 30, 37, 35, 33, 27, 31, 31, 35, 34, 45, 40, 36, 25, 34, 27, 31, 25, 37, 34, 26, 34, 37, 26, 34, 37, 31, 34, 31, 34, 33, 35, 32, 37, 31, 30, 39, 31, 37, 30, 32, 31, 26, 38, 31, 40, 31, 26, 30, 36, 35, 32, 31, 27, 34, 35, 39, 25, 32, 32, 37, 30, 35, 29, 35, 29, 35, 37, 21};
    static Integer[] get_image = {};

    static Integer addlogIndx = 0;
    static Integer get_quizIndx = 0;
    static Integer get_submisionIndx = 0;
    static Integer ldap_authIndx = 0;
    static Integer partial_submitIndx = 0;
    static Integer quizIndx = 0;
    static Integer submitIndx = 0;
    static Integer summaryIndx = 0;
    static Integer get_imageIndx = 0;

    /**
     * Processes requests for both HTTP <code>GET</code> and <code>POST</code>
     * methods.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

        response.setContentType("text/html;charset=UTF-8");
        try (PrintWriter out = response.getWriter()) {
            /* TODO output your page here. You may use following sample code. */
            out.println("<!DOCTYPE html>");
            out.println("<html>");
            out.println("<head>");
            out.println("<title>Servlet testservelet</title>");
            out.println("</head>");
            out.println("<body>");
            out.println("<h1>Servlet testservelet at " + request.getContextPath() + "</h1>");
            out.println("</body>");
            out.println("</html>");
        }
    }

    // <editor-fold defaultstate="collapsed" desc="HttpServlet methods. Click on the + sign on the left to edit the code.">
    /**
     * Handles the HTTP <code>GET</code> method.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
    }

    /**
     * Handles the HTTP <code>POST</code> method.
     *
     * @param request servlet request
     * @param response servlet response
     * @throws ServletException if a servlet-specific error occurs
     * @throws IOException if an I/O error occurs
     */
    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

//        PrintWriter print = response.getWriter();
//        print.println("HAI");
        String name = request.getParameter("request");
        Integer sleep_duration = 0;

        String top = "<!DOCTYPE html>"
                + "<html>"
                + "<head>"
                + "<meta charset=\"UTF-8\">"
                + "<link rel=\"icon\" type=\"image/x-icon\" href=\"data:image/x-icon\">"
                + "</head>"
                + "<body>";
        String body = "";
        String tail = "</body></html>";

        boolean flag = true;

        request.getRemotePort();

        if (name.equalsIgnoreCase("add-log")) {

            sleep_duration = addlog[addlogIndx];
            addlogIndx = (addlogIndx + 1) % 100;

            System.out.println("\n1 NAME = " + name + " sleepDuration = " + sleep_duration + " Port : " + request.getRemotePort());
            body = "444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444";
        } else if (name.equalsIgnoreCase("get-image")) {

            sleep_duration = get_image[get_imageIndx];
            get_imageIndx = (get_imageIndx + 1) % 100;

            System.out.println("\n2 NAME = " + name + " sleepDuration = " + sleep_duration + " Port : " + request.getRemotePort());
            body = "777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777";
        } else if (name.equalsIgnoreCase("get-submission")) {

            sleep_duration = get_submision[get_submisionIndx];
            get_submisionIndx = (get_submisionIndx + 1) % 100;

            System.out.println("\n3 NAME = " + name + " sleepDuration = " + sleep_duration + " Port : " + request.getRemotePort());
            body = "77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777";
        } else if (name.equalsIgnoreCase("get-summary")) {

            sleep_duration = summary[summaryIndx];
            summaryIndx = (summaryIndx + 1) % 100;

            System.out.println("\n4 NAME = " + name + " sleepDuration = " + sleep_duration + " Port : " + request.getRemotePort());
            body = "99999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999";
        } else if (name.equalsIgnoreCase("ldap-auth")) {

            sleep_duration = ldap_auth[ldap_authIndx];
            ldap_authIndx = (ldap_authIndx + 1) % 100;

            System.out.println("\n5 NAME = " + name + " sleepDuration = " + sleep_duration + " Port : " + request.getRemotePort());
            body = "222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222";
        } else if (name.equalsIgnoreCase("partialsubmission")) {

            sleep_duration = partial_submit[partial_submitIndx];
            partial_submitIndx = (partial_submitIndx + 1) % 100;

            System.out.println("\n6 NAME = " + name + " sleepDuration = " + sleep_duration + " Port : " + request.getRemotePort());
            body = "77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777";
        } else if (name.equalsIgnoreCase("quiz")) {

            sleep_duration = quiz[quizIndx];
            quizIndx = (quizIndx + 1) % 100;

            System.out.println("\n7 NAME = " + name + " sleepDuration = " + sleep_duration + " Port : " + request.getRemotePort());
            body = "66666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666";
        } else if (name.equalsIgnoreCase("quiz-get")) {

            sleep_duration = get_quiz[get_quizIndx];
            get_quizIndx = (get_quizIndx + 1) % 100;

            System.out.println("\n8 NAME = " + name + " sleepDuration = " + sleep_duration + " Port : " + request.getRemotePort());
            body = "777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777";
        } else if (name.equalsIgnoreCase("submit")) {

            sleep_duration = submit[submitIndx];
            submitIndx = (submitIndx + 1) % 100;

            System.out.println("\n9 NAME = " + name + " sleepDuration = " + sleep_duration + " Port : " + request.getRemotePort());
            body = "4444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444";
        } else {
            System.out.println("\n10 NAME = " + name + " sleepDuration = " + sleep_duration + " Port : " + request.getRemotePort());
            body = "unknown URL";
            flag = false;
        }

        PrintWriter out = response.getWriter();

        try {
            Thread.currentThread().sleep(sleep_duration);
        } catch (InterruptedException ex) {
            System.out.println("\nException ex : " + ex.toString());
            ex.printStackTrace();
        }

        out.println(top + body + tail);
        if (flag) {
            response.setStatus(200);
        } else {
            response.setStatus(404);
        }

//        response.setContentLength(50);
//            response.setHeader("check",str);
//        response.setContentLength(333);
//        System.out.println("\n\nNAME = " + name);
        //        response.setStatus(200);
        //        response.setContentType("text/html;charset=UTF-8");
        //        response.setContentLength(1033);
        //        response.setHeader("message","444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444");
        //        response.get
        /*
        try (PrintWriter out = response.getWriter()) {
          
            out.println("<!DOCTYPE html>");
            out.println("<html>");
            out.println("<head>");
            out.println("<title>Servlet testservelet</title>");
            out.println("</head>");
            out.println("<body>");
            out.println("<h1>Servlet testservelet at " + request.getContextPath() + "</h1>");
            out.println("</body>");
            out.println("</html>");
        }*/ //        processRequest(request, response);
    }

    /**
     * Returns a short description of the servlet.
     *
     * @return a String containing servlet description
     */
    @Override
    public String getServletInfo() {
        return "Short description";
    }// </editor-fold>

}
